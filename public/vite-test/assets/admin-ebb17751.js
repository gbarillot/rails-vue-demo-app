import{d as q,_ as v,o as r,c,a as t,t as i,b as V,w,e as g,v as S,f as F,F as y,r as k,g as p,h as d,i as m,j as x,k as f,l as _,m as I,n as T,E as L,p as C,q as O,s as P,u as E,x as R,A as M,y as B}from"./vue-i18n-6b73e0ca.js";const D=q("dashboard",{state:()=>({metrics:{}}),actions:{async index(){this.axios.get("/dashboard").then(e=>{this.metrics=e.data.metrics})}}}),Q={setup(){return{store:D()}},created(){this.$api.call(this.store.index())}},W={class:"container"},z={class:"row"},J=V('<div class="col-xs-24 col-md-6 card"><h3>Rails 7</h3><p><a href="https://edgeguides.rubyonrails.org/" target="_blank">An awesome server side Framework</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Vue 3</h3><p><a href="https://vuejs.org/guide/" target="_blank">SPA without the pain</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Pinia</h3><p><a href="https://pinia.vuejs.org/" target="_blank">State manager</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Vue Router</h3><p><a href="https://router.vuejs.org/" target="_blank">Flexible</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Axios</h3><p><a href="https://axios-http.com/docs/intro" target="_blank">Handles AJAX requests, no JQuery</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Vite</h3><p><a href="https://vitejs.dev/" target="_blank">Next generation Frontend tooling</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Devise</h3><p><a href="https://github.com/heartcombo/devise" target="_blank">Simple authentication using regular cookies that just works</a></p></div>',7),G={class:"col-xs-24 col-md-6 card"},H=t("h3",null,"I18n",-1),K={href:"https://kazupon.github.io/vue-i18n/",target:"_blank"},X=V('<div class="col-xs-24 col-md-6 card"><h3>ActionCable</h3><p><a href="https://guides.rubyonrails.org/action_cable_overview.html" target="_blank">Websockets with 2 way bindings</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Kaminari</h3><p><a href="https://github.com/kaminari/kaminari" target="_blank">Efficient Pagination</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Ransack</h3><p><a href="https://github.com/activerecord-hackery/ransack" target="_blank">ActiveRecord wizardry for dynamic search filters</a></p></div><div class="col-xs-24 col-md-6 card"><h3>Bootstrap grid</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout" target="_blank">... but using native CSS Grid layout</a></p></div>',4);function Y(e,s,o,u,h,l){return r(),c("section",W,[t("div",z,[J,t("div",G,[H,t("p",null,[t("a",K,i(e.$tc("dashboard.musicians",0))+", "+i(e.$tc("dashboard.musicians",1))+", "+i(u.store.metrics.musicians+" "+e.$tc("dashboard.musicians",u.store.metrics.musicians)),1)])]),X])])}const Z=v(Q,[["render",Y]]),A=q("musicians",{state:()=>({errors:{},bands:[],musician:{},musicians:[],pagination:{}}),actions:{async index(e){return this.axios.get(e).then(s=>{this.pagination=s.data.pagination,this.bands=s.data.bands,this.musicians=s.data.musicians})},async new(){return this.errors={},this.musician={},this.axios.get("/musicians/new").then(e=>{this.musician=e.data.musician})},async create(){return this.errors={},this.axios.post("/musicians",this.musician).then(e=>(this.musician=e.data.musician,!0)).catch(e=>(this.errors=e.response.data.errors,!1))},async edit(e){return this.errors={},this.musician={},this.axios.get(`/musicians/${e}/edit`).then(s=>{this.musician=s.data.musician})},async update(e){return this.errors={},this.axios.put(`/musicians/${e}`,this.musician).then(s=>!0).catch(s=>(this.errors=s.response.data.errors,!1))},async destroy(e){return this.errors={},this.axios.delete(`/musicians/${e}`).then(s=>!0).catch(s=>(this.errors=s.response.data.errors,!1))}}}),tt={props:["bands"],data:function(){return{form:{name_cont:"",band_eq:null}}},methods:{toggleForm(){this.$refs.filters.classList.toggle("hidden")},search(){const e=Object.fromEntries(Object.entries(this.form).map(s=>[`q[${s[0]}]`,s[1]]));this.$router.push({path:this.$route.path,query:e}),this.$emit("index")},reset(){this.form={name_cont:"",band_eq:null},this.$router.push({path:this.$route.path,query:""})}}},et={class:"row"},st={class:"col-xs-24 col-md-10"},at={class:"col-xs-24 col-md-10"},nt={value:null},it=["value"],ot={class:"row"},rt={class:"col-xs-24 col-md-5"},ct=["value"],lt={class:"col-xs-24 col-md-5"};function ut(e,s,o,u,h,l){return r(),c("section",null,[t("a",{href:"#",onClick:s[0]||(s[0]=w((...n)=>l.toggleForm&&l.toggleForm(...n),["prevent"]))}," "+i(e.$t("filter")),1),t("form",{onSubmit:s[4]||(s[4]=w((...n)=>l.search&&l.search(...n),["prevent"])),ref:"filters","accept-charset":"UTF-8",class:"card hidden"},[t("div",et,[t("div",st,[t("label",null,i(e.$t("musicians.form.name")),1),g(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>e.form.name_cont=n),placeholder:"name"},null,512),[[S,e.form.name_cont]])]),t("div",at,[t("label",null,i(e.$t("musicians.form.band")),1),g(t("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>e.form.band_eq=n)},[t("option",nt,i(e.$t("any")),1),(r(!0),c(y,null,k(o.bands,n=>(r(),c("option",{key:n.key,value:n.key},i(n.name),9,it))),128))],512),[[F,e.form.band_eq]])])]),t("div",ot,[t("div",rt,[t("input",{type:"submit",role:"button",class:"button button-primary",value:e.$t("filter")},null,8,ct)]),t("div",lt,[t("a",{onClick:s[3]||(s[3]=(...n)=>l.reset&&l.reset(...n)),href:"#",role:"button",class:"secondary outline fill"},i(e.$t("reset_filters")),1)])])],544)])}const dt=v(tt,[["render",ut]]),ht={components:{Filters:dt},setup(){return{store:A()}},mounted(){this.index()},methods:{index(){this.$api.call(this.store.index(this.$route.fullPath),this.$refs.listing)}}},mt={class:"container"},_t={class:"row"},pt={class:"col-xs-12"},ft={class:"breadcrumb"},vt={class:"col-xs-12 ta-right"},$t={ref:"listing"},bt={key:0},gt={key:1},yt={class:"card ta-center"},kt=t("p",null,'This whole CRUD section is deliberatly slowed down so you can actually see the animations. Comment out the "slow" method in Api::Admin::MusiciansController to use the app at full speed',-1);function wt(e,s,o,u,h,l){const n=p("router-link"),a=p("filters"),$=p("pagination");return r(),c("section",mt,[t("div",_t,[t("div",pt,[t("ul",ft,[t("li",null,[d(n,{to:{name:"root_path"}},{default:m(()=>[_(i(e.$t("title")),1)]),_:1})]),t("li",null,i(e.$t("nav.musicians")),1)])]),t("div",vt,[d(n,{to:{name:"new_musician_path"},role:"button",class:"outline"},{default:m(()=>[_(i(e.$t("musicians.create")),1)]),_:1})])]),d(a,{bands:u.store.bands},null,8,["bands"]),t("div",$t,[u.store.musicians&&u.store.musicians.length>0?(r(),c("table",bt,[t("thead",null,[t("tr",null,[t("th",null,i(e.$t("musicians.form.id")),1),t("th",null,i(e.$t("musicians.form.name")),1),t("th",null,i(e.$t("musicians.form.band")),1)])]),t("tbody",null,[(r(!0),c(y,null,k(u.store.musicians,b=>(r(),c("tr",{key:b.id},[t("td",null,[d(n,{to:{name:"edit_musician_path",params:{id:b.id}}},{default:m(()=>[_(i(b.id),1)]),_:2},1032,["to"])]),t("td",null,[d(n,{to:{name:"edit_musician_path",params:{id:b.id}}},{default:m(()=>[_(i(b.name),1)]),_:2},1032,["to"])]),t("td",null,[d(n,{to:{name:"edit_musician_path",params:{id:b.id}}},{default:m(()=>[_(i(b.band),1)]),_:2},1032,["to"])])]))),128))])])):(r(),c("div",gt,[t("h3",yt,i(e.$t("no_result")),1)])),u.store.pagination?(r(),x($,{key:2,store:u.store,onClicked:l.index},null,8,["store","onClicked"])):f("",!0)],512),kt])}const xt=v(ht,[["render",wt]]),Ct={props:["attr","messages"],data(){return{message:""}},watch:{messages:function(){this.message="",this.messages[this.attr]&&(this.message=this.messages[this.attr].join(","))}}},St={key:0,class:"error"};function Ft(e,s,o,u,h,l){return h.message!=""?(r(),c("span",St,i(h.message),1)):f("",!0)}const At=v(Ct,[["render",Ft]]),qt={props:["data"],components:{Errors:At}},Vt=["aria-invalid"],Mt=["aria-invalid"],Ut=["value"];function Nt(e,s,o,u,h,l){const n=p("errors");return r(),c("section",null,[t("fieldset",null,[t("label",null,i(e.$t("musicians.form.name")),1),d(n,{attr:"name",messages:o.data.errors},null,8,["messages"]),g(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>o.data.musician.name=a),"aria-invalid":o.data.errors.name?!0:""},null,8,Vt),[[S,o.data.musician.name]])]),t("fieldset",null,[t("label",null,i(e.$t("musicians.form.band")),1),d(n,{attr:"band",messages:o.data.errors},null,8,["messages"]),g(t("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>o.data.musician.band=a),"aria-invalid":o.data.errors.band?!0:""},[(r(!0),c(y,null,k(o.data.musician.bands,a=>(r(),c("option",{key:a.key,value:a.key},i(a.name),9,Ut))),128))],8,Mt),[[F,o.data.musician.band]])])])}const U=v(qt,[["render",Nt]]),jt={components:{MusicianForm:U},setup(){return{store:A()}},mounted(){this.$api.call(this.store.new(),this.$refs.animation)},methods:{create(e){this.$api.call(this.store.create(),e.target).then(s=>{s===!0&&this.$router.push({name:"edit_musician_path",params:{id:this.store.musician.id}})})}}},It={class:"container"},Tt={class:"breadcrumb"},Lt={ref:"animation"},Ot={class:"row"},Pt={class:"col-sm-4 col-start-sm-21 ta-right"},Et=["value"];function Rt(e,s,o,u,h,l){const n=p("router-link"),a=p("MusicianForm");return r(),c("section",It,[t("ul",Tt,[t("li",null,[d(n,{to:{name:"root_path"}},{default:m(()=>[_(i(e.$t("title")),1)]),_:1})]),t("li",null,[d(n,{to:{name:"musicians_path"}},{default:m(()=>[_(i(e.$t("nav.musicians")),1)]),_:1})]),t("li",null,[t("span",null,i(e.$t("musicians.new")),1)])]),t("div",Lt,[t("form",{onSubmit:s[0]||(s[0]=w((...$)=>l.create&&l.create(...$),["prevent"])),"accept-charset":"UTF-8",class:"card"},[d(a,{data:u.store},null,8,["data"]),t("div",Ot,[t("div",Pt,[t("input",{type:"submit",value:e.$t("save")},null,8,Et)])])],32)],512)])}const Bt=v(jt,[["render",Rt]]),Dt={components:{MusicianForm:U},setup(){return{store:A()}},mounted(){this.$api.call(this.store.edit(this.$route.params.id),this.$refs.animation)},methods:{update(e){this.$api.call(this.store.update(this.$route.params.id),e.target)},destroy(){confirm(this.$t("confirm"))&&this.$api.call(this.store.destroy(this.$route.params.id),this.$refs.animation).then(e=>{e===!0&&this.$router.push({name:"musicians_path"})})}}},Qt={class:"container"},Wt={class:"breadcrumb"},zt={ref:"animation"},Jt={class:"row"},Gt={class:"col-sm-4 secondary outline"},Ht={class:"col-sm-4 col-start-sm-21 ta-right"},Kt=["value"];function Xt(e,s,o,u,h,l){const n=p("router-link"),a=p("MusicianForm");return r(),c("section",Qt,[t("ul",Wt,[t("li",null,[d(n,{to:{name:"root_path"}},{default:m(()=>[_(i(e.$t("title")),1)]),_:1})]),t("li",null,[d(n,{to:{name:"musicians_path"}},{default:m(()=>[_(i(e.$t("nav.musicians")),1)]),_:1})]),t("li",null,i(u.store.musician.name),1)]),t("div",zt,[t("form",{ref:"form",onSubmit:s[1]||(s[1]=w((...$)=>l.update&&l.update(...$),["prevent"])),"accept-charset":"UTF-8",class:"card"},[d(a,{data:u.store},null,8,["data"]),t("div",Jt,[t("div",Gt,[t("a",{onClick:s[0]||(s[0]=(...$)=>l.destroy&&l.destroy(...$)),href:"#",role:"button",class:"secondary outline"},i(e.$t("delete")),1)]),t("div",Ht,[t("input",{type:"submit",value:e.$t("save")},null,8,Kt)])])],544)],512)])}const Yt=v(Dt,[["render",Xt]]),Zt={data(){return{message:"",messages:[]}},created(){this.$cable.on("chat",e=>{this.messages.unshift(e.message)})},methods:{publish(){this.$cable.send(this.message),this.message=""}}},te={class:"container"},ee={class:"breadcrumb"},se={class:"row"},ae={class:"col-xs-24 col-sm-12 card"},ne=t("br",null,null,-1),ie=t("br",null,null,-1),oe=t("input",{type:"submit",value:"Publish"},null,-1),re=t("div",{class:"card"},[t("p",null,"You can also push messages here from the server using the Rails console:"),t("code",null,'ActionCable.server.broadcast("ChatChannel", { message: "hey!" })')],-1),ce={class:"col-xs-24 col-sm-12 card"},le=t("p",null,[_("All messages you type are upcased "),t("b",null,"server side"),_(" after a round trip. If you open multiple tabs, messages are broadcasted on all tabs.")],-1),ue={key:0},de={key:1},he=t("p",null,[t("i",null,"Waiting for messages...")],-1),me=[he];function _e(e,s,o,u,h,l){const n=p("router-link");return r(),c("section",te,[t("ul",ee,[t("li",null,[d(n,{to:{name:"root_path"}},{default:m(()=>[_(i(e.$t("title")),1)]),_:1})]),t("li",null,i(e.$t("nav.websockets")),1)]),t("div",se,[t("div",ae,[t("form",{onSubmit:s[1]||(s[1]=w((...a)=>l.publish&&l.publish(...a),["prevent"])),"accept-charset":"UTF-8"},[g(t("input",{type:"input","onUpdate:modelValue":s[0]||(s[0]=a=>h.message=a),placeholder:"Type in a message"},null,512),[[S,h.message]]),ne,ie,oe],32),re]),t("div",ce,[le,h.messages.length>0?(r(),c("div",ue,[(r(!0),c(y,null,k(h.messages,(a,$)=>(r(),c("p",{key:$},[t("i",null,i(a),1)]))),128))])):(r(),c("div",de,me))])])])}const pe=v(Zt,[["render",_e]]),fe=I({history:T(`/${I18n.prefix}admin`),routes:[{path:"/",component:Z,name:"root_path"},{path:"/musicians",component:xt,name:"musicians_path"},{path:"/musicians/new",component:Bt,name:"new_musician_path"},{path:"/musicians/:id/edit",component:Yt,name:"edit_musician_path"},{path:"/websockets",component:pe,name:"websockets_path"},{path:"/404",component:L},{path:"/:catchAll(.*)",redirect:"/404"}]}),ve={data(){return{availableLocales:window.I18n.availableLocales,locale:window.I18n.locale}},methods:{activeOn(e){return e.includes(this.$route.name)?"active":""}},watch:{locale:function(e){let s=`/${e}${this.$route.path}`;e==this.availableLocales[0]&&(s=`${this.$route.path}`),window.location.href=s}}},$e={class:"top-nav"},be={class:"container"},ge={class:"row"},ye={class:"col-md-16 col-lg-21"},ke={href:"/users/sign_out"},we={class:"col-md-8 col-lg-3"},xe=["value"];function Ce(e,s,o,u,h,l){const n=p("router-link");return r(),c("section",$e,[t("div",be,[t("div",ge,[t("div",ye,[t("nav",null,[t("ul",null,[t("li",{class:C(l.activeOn(["root_path"]))},[d(n,{to:{name:"root_path"}},{default:m(()=>[_(i(e.$t("nav.dashboard")),1)]),_:1})],2),t("li",{class:C(l.activeOn(["musicians_path","edit_musician_path","new_musician_path"]))},[d(n,{to:{name:"musicians_path"}},{default:m(()=>[_(i(e.$t("nav.musicians")),1)]),_:1})],2),t("li",{class:C(l.activeOn(["websockets_path"]))},[d(n,{to:{name:"websockets_path"}},{default:m(()=>[_(i(e.$t("nav.websockets")),1)]),_:1})],2),t("li",null,[t("a",ke,i(e.$t("nav.logout")),1)])])])]),t("div",we,[g(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>h.locale=a)},[(r(!0),c(y,null,k(h.availableLocales,a=>(r(),c("option",{value:a,key:a},i(a.toUpperCase()),9,xe))),128))],512),[[F,h.locale]])])])])])}const Se=v(ve,[["render",Ce]]),Fe={components:{"nav-bar":Se}};function Ae(e,s,o,u,h,l){const n=p("nav-bar"),a=p("router-view");return r(),c("section",null,[d(n),d(a)])}const qe=v(Fe,[["render",Ae]]),Ve={props:["store"],methods:{setQuery(e){let s=JSON.parse(JSON.stringify(this.$route.query));return s.page=e,s}},watch:{"$route.query":function(){this.$emit("clicked")}}},Me={clas:"container"},Ue={key:0},Ne={class:"pagination"},je={key:0},Ie=t("span",null,"«",-1),Te={key:1},Le={key:2},Oe={key:3},Pe={key:1},Ee=t("span",null,"»",-1);function Re(e,s,o,u,h,l){const n=p("router-link");return r(),c("section",Me,[o.store.pagination.next||o.store.pagination.previous?(r(),c("div",Ue,[t("ul",Ne,[o.store.pagination.previous!=null?(r(),c("li",je,[o.store.pagination.previous?(r(),x(n,{key:0,to:{path:e.$route.path,query:l.setQuery(o.store.pagination.previous)}},{default:m(()=>[Ie]),_:1},8,["to"])):f("",!0)])):f("",!0),(r(!0),c(y,null,k(o.store.pagination.pages,a=>(r(),c("li",{key:a,class:C([o.store.pagination.current==a?"active":""])},[a!=o.store.pagination.current&&(a==1||a==2||a==3||a==o.store.pagination.pages||a==o.store.pagination.pages-1||a==o.store.pagination.pages-2)?(r(),x(n,{key:0,to:{path:e.$route.path,query:l.setQuery(a)}},{default:m(()=>[_(i(a),1)]),_:2},1032,["to"])):f("",!0),a!=o.store.pagination.current&&a==4?(r(),c("span",Te,"...")):f("",!0),a==o.store.pagination.current?(r(),c("span",Le,i(a),1)):f("",!0),a==o.store.pagination.current&&a==4?(r(),c("span",Oe,"...")):f("",!0)],2))),128)),o.store.pagination.next!=null&&o.store.pagination.pages>0?(r(),c("li",Pe,[o.store.pagination.next?(r(),x(n,{key:0,to:{path:e.$route.path,query:l.setQuery(o.store.pagination.next)}},{default:m(()=>[Ee]),_:1},8,["to"])):f("",!0)])):f("",!0)])])):f("",!0)])}const Be=v(Ve,[["render",Re]]),N=O(qe),De=P({channel:"ChatChannel"}),Qe=E({handler:M,namespace:"/admin"}),j=R();j.use(({store:e})=>{e.axios=M});const We=B({locale:"current",messages:translations});N.component("pagination",Be);N.use(fe).use(j).use(We).use(Qe).use(De).mount("#app");
